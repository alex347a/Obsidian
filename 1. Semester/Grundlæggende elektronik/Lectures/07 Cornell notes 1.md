| Operational amplifier (opamp) | Characteristics:<br>- Infinite input impedance<br>- Infinite gain for the differential input signal<br>- Zero gain for the common-mode input signal<br>- Zero output impedance<br>- Infinite bandwidth<br><br>For a real opamp to work there has to be one or more DC supply voltages. DC voltages are denoted with repeated uppercase subscripts, for example $V_{CC}$<br>![[Opamp.png]]<br><br>Ideal-op-amp circuits are analyzed by:<br>1. Verify that negative feedback is present<br>2. Assume that the differential input voltage and the input current of the op amp are forced to zero. (Summing-point-constraint.)<br>3. Apply standard circuit analysis principles, such as Kirchoff's laws and Ohm's law, to solve for the quantities of interest.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Basic inverter                | $$i_1=\frac {v_{in}}{R_1}$$<br>Since the current flowing into the op-amp terminals is zero, the current flowing through $R_2$ is <br>$$i_2=i_1$$<br>Therefore:<br>$$i_2=\frac {v_{in}}{R_1}$$<br>$$v_o+R_2i_2=0$$<br>Solving the voltage gain, when we substitute for $i_2$:<br>$$A_v=\frac {v_o}{v_{in}}=-\frac{R_2}{R_1}$$<br>This is the closed-loop gain.<br>The voltage gain is negative, so the amplifier is inverting.<br>The input impedance is given by:<br>$$Z_{in}=\frac{v_{in}}{i_2}=R_1$$<br>So we can change the impe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Noninverting amplifiers       | First we see that the feedback is negative, because if we assume that $v_i$ is positive then it produces a very large positive output voltage. Part of the voltage appears across $R_1$, and since $v_i=v_{in}-v_1$, the voltage $v_i$ becomes smaller as $v_o$ and $v_1$ become larger. So the circuit drives $v_i$ toward zero. Therefore it is negative feedback, because the feedback signal opposes the original input. Since it's negative feedback we can use summing-point constraint: $v_i=0$ and $i_i=0$. Applying Kirchoff's law:<br>$$v_{in}=v_1$$<br>Since $i_i$ is zero, $R_1$ is given by voltage-division principle:<br>$$v_1=\frac{R_1}{R_1+R_2}\cdot v_o$$<br>By substituting, the closed-loop voltage gain is:<br>$$A_v=\frac{v_o}{v_{in}}=1+\frac{R_2}{R_1}$$<br>Since $A_v$ is positive, and the gain is given by the ratio of resistors, the input impedance is theoretically                                                                                                                                                                                                                                                                                                                                               1. nonideal properties in linear operation<br>2. nonlinear characteristics<br>3. DC offsets.<br><br>Gain and bandwidth limitations:<br>an opamp without feedback resistors has an open-loop gain magnitude between $10^4$ and $10^6$. The bandwidth is limited because the gain is a function of frequency, where the magnitude becomes smaller at higher frequencies. The bandwidth is usually limited with frequency compensation, which avoids oscillation (beyond scope of book) The open-loop gain of most integrated-circuit op amps is given by: $$A_{OL}(f)=\frac{A_{0OL}}{1+j(f/f_{BOL})}$$<br>Where $A_{OL}(f)$ is the DC open-loop gain, and $f_{BOL}$ is the break frequency. In a bode plot $A_{OL}(f)$ is approximately constant until the break frequency $f_{BOL}$.<br><br>Negative feedback reduces DC gain and extends its bandwidth.<br>If we have a noninverting amplifier circuit like the one below:<br>![[Noninverting amplifier.png]]<br>The phasor output voltage $\textbf V_o$ is the open-loop gain times the phasor differential input voltage $\textbf V_{id}$:<br>$$\textbf V_o=A_{OL}(f)\cdot \textbf V_{id}$$<br>We assume the input impedance is infinite, so the input current is zero, then by using the voltage-division-principle the resistance $R_1$, which is in series with $R_2$. The voltage is $\beta \textbf V_o$, where $\beta$ is the voltage division ratio of $R_1$ and $R_2$   of $R_1$ |
