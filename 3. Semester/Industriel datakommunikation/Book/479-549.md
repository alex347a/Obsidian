### **The Link Layer and LANs - Introduction**
The link layer is responsible for transferring datagrams over a **single communication link** between adjacent nodes (hosts, routers, switches) along the end-to-end path.
**Key Questions for this Chapter:**
- How are network-layer datagrams encapsulated into link-layer frames?
- How are transmission conflicts on shared/broadcast links resolved?
- How does link-layer addressing work and how does it relate to network-layer (IP) addressing?
- What is the difference between a switch and a router?

**Two Fundamental Types of Link-Layer Channels:**
1. **Broadcast Channels:** Connect multiple hosts (e.g., wireless LANs, HFC cable access networks). Require a **Medium Access Control (MAC) protocol** to coordinate transmissions and avoid collisions.
2. **Point-to-Point Links:** Connect two individual nodes (e.g., a long-distance router link, a computer to an Ethernet switch). Coordination is simpler.

**Transportation Analogy:**
- **Tourist = Datagram**
- **Transportation Segment (e.g., limo, plane, train) = Link**
- **Transportation Company/Mode = Link-Layer Protocol**
- **Travel Agent = Routing Protocol**
#### **The Services Provided by the Link Layer**
Link-layer protocols can offer several key services:
- **Framing:** Encapsulates the network-layer datagram within a link-layer frame for transmission. The frame includes a data field (for the datagram) and header fields.
- **Link Access:** A **Medium Access Control (MAC) protocol** governs the rules for transmitting a frame onto the link. This is crucial for **multiple access** links where multiple nodes share a single broadcast channel.
- **Reliable Delivery:** Guarantees the movement of each datagram across the link without error, using acknowledgments and retransmissions. Often used for error-prone links (like wireless) but considered overhead for reliable wired links (like fibre).
- **Error Detection and Correction:** The transmitting node adds **error-detection bits** to the frame. The receiving node checks these bits to detect if bit errors have occurred during transmission. **Error correction** goes a step further by also determining and fixing the exact location of the errors.
#### **Where Is the Link Layer Implemented?**
The link layer is implemented in a combination of **hardware and software**, and is the point in the protocol stack where software meets hardware.
- **Hardware (Network Adapter / NIC):** The primary implementation. A dedicated chip (the network adapter or Network Interface Controller - NIC) handles most link-layer services in hardware:
    - Framing
    - Link access
    - Error detection
    - Signal transmission/reception
- **Software (Host CPU):** Implements higher-level link-layer functionality:
    - Assembling link-layer addressing information.
    - Activating the controller hardware.
    - Handling controller interrupts (e.g., frame received).
    - Passing datagrams up to the network layer. (INSERT FIGURE 6.2, TYPICAL HOST ARCHITECTURE, HERE)
### **Error-Detection and -Correction Techniques**
The link layer often provides services to detect and sometimes correct bit errors introduced during transmission. These techniques involve the sender adding extra **Error-Detection and -Correction (EDC)** bits to the data (D). The receiver uses these bits to determine if the received data (D') is error-free. (INSERT FIGURE 6.3, ERROR-DETECTION SCENARIO, HERE)

**Key Trade-off:** More robust error detection/correction techniques reduce the probability of **undetected errors** but incur a higher overhead (more EDC bits and more computation).
#### **Parity Checks**
**Single Parity Bit:**
- The sender adds one extra bit so that the total number of 1s in the `d+1` bits is either **even** (even parity) or **odd** (odd parity).
- The receiver counts the 1s. If the count doesn't match the expected parity (e.g., an odd number found with even parity), an error is detected. (INSERT FIGURE 6.4, ONE-BIT EVEN PARITY, HERE)
- **Limitation:** Can only detect an **odd number of bit errors**. If an even number of bits are flipped, the error goes **undetected**. This is problematic with burst errors.

**Two-Dimensional Parity:**
- A generalization that provides **error correction** capability.
- The `d` data bits are arranged in an `i x j` matrix.
- A parity bit is computed for each **row** and each **column**. The `i + j + 1` parity bits are sent as EDC. (INSERT FIGURE 6.5, TWO-DIMENSIONAL EVEN PARITY, HERE)
- **Capabilities:**
    - Can **detect and correct** any **single-bit error**. The intersection of the row and column with parity errors identifies the corrupted bit.
    - Can **detect (but not correct)** any combination of **two errors**.
#### **Forward Error Correction (FEC)**
- The ability of the receiver to **detect and correct errors** without needing the sender to retransmit the data.
- **Advantages:**
    - Reduces the number of retransmissions required.
    - Provides immediate correction, which is crucial for **real-time applications** (e.g., VoIP, video streaming) and links with **long propagation delays** (e.g., satellite, deep-space).

