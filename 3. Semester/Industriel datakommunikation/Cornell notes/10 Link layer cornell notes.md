### **Cornell Notes: The Link Layer and LANs**

| **Term / Concept**                       | **Definition / Key Points**                                                                                                                                                                       |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Link Layer (Introduction)**            | Responsible for transferring datagrams over a **single communication link** between adjacent nodes (hosts, routers, switches).                                                                    |
| **Link Layer Services**                  | **Framing**, **Link Access** (MAC), **Reliable Delivery** (optional), **Error Detection and Correction**.                                                                                         |
| **Implementation**                       | Combination of **hardware** (Network Interface Card - NIC) for framing, access, error detection and **software** (OS) for addressing, activation, and passing data up.                            |
| **Error Detection & Correction**         | Sender adds **EDC** bits. Receiver checks them to find errors. **Trade-off:** Robustness vs. Overhead.                                                                                            |
| **Parity Checks**                        | **Single-bit:** Detects odd number of errors. **Two-dimensional:** Can detect and correct single-bit errors; detects two-bit errors.                                                              |
| **Checksumming**                         | Used in **transport** (TCP/UDP) and **network** (IP) layers. Simple, software-based. **Internet checksum** uses 16-bit 1s complement.                                                             |
| **Cyclic Redundancy Check (CRC)**        | Powerful, hardware-based error detection used in the **link layer**. Uses modulo-2 arithmetic (XOR). Very robust against burst errors.                                                            |
| **Multiple Access Problem**              | How to coordinate transmissions of multiple nodes on a **shared broadcast channel** to avoid **collisions**.                                                                                      |
| **Channel Partitioning Protocols**       | Divide the channel to avoid collisions. **TDM** (Time slots), **FDM** (Frequency bands), **CDMA** (Unique codes). **Pros:** Collision-free, fair. **Cons:** Inefficient for a single active node. |
| **Random Access Protocols**              | Nodes transmit at full rate. If collision, wait random time and retry. Aim for high efficiency with one active node.                                                                              |
| **ALOHA**                                | **Pure ALOHA:** Decentralized, transmit immediately. Efficiency: **~18%**. **Slotted ALOHA:** Synchronized time slots. Efficiency: **~37%**.                                                      |
| **Carrier Sense Multiple Access (CSMA)** | "Listen before speaking." **Carrier Sensing:** Check if channel is idle before transmitting. **Collision Detection:** Listen while transmitting.                                                  |
| **CSMA/CD (Ethernet)**                   | CSMA with **Collision Detection**. On collision: **1.** Abort transmission. **2.** Wait random time (Binary Exponential Backoff). **3.** Retry.                                                   |
| **Binary Exponential Backoff**           | After *n*th collision, choose **K** from {0, 1, ..., 2ⁿ-1}. Wait = **K * 512 bit-times**. Adapts wait time based on collision history.                                                            |
| **CSMA/CD Efficiency**                   | `Efficiency = 1 / (1 + 5 * d_prop / d_trans)`. Efficiency **↑** as propagation delay **(d_prop) ↓** or frame transmission time **(d_trans) ↑**.                                                   |
| **Taking-Turns Protocols**               | Provide high efficiency and fairness. **Polling:** Master node polls slaves. **Token-Passing:** Token circulates; node with token can transmit.                                                   |
| **DOCSIS (Cable Internet)**              | **Hybrid protocol.** Uses **FDM** (channels), **TDM** (mini-slots), **Taking-Turns** (CMTS grants slots for data), and **Random Access** (for initial requests).                                  |
| **MAC Address**                          | **Link-layer address.** 6 bytes (48 bits), flat structure, globally unique (managed by IEEE), burned into adapter. Analogy: Social Security Number.                                               |
| **Address Resolution Protocol (ARP)**    | Resolves an **IP address** to a **MAC address** for a destination on the **same subnet**. Uses query/response packets and maintains an ARP table.                                                 |
| **Ethernet**                             | Dominant wired LAN technology. **Connectionless, unreliable** service. Uses **CSMA/CD** (in historical broadcast versions).                                                                       |
| **Ethernet Frame Structure**             | **Preamble**, **Dest/Src MAC Address** (6B each), **Type** (for demultiplexing), **Data** (46-1500B), **CRC**.                                                                                    |
| **Link-Layer Switch**                    | **Layer-2 packet switch.** Forwards frames based on **MAC addresses**. **Self-learning:** Builds switch table automatically. **Plug-and-play.**                                                   |
| **Switch Functions**                     | **Filtering** (drop frame), **Forwarding** (send frame to interface), **Self-Learning** (build table from source addresses).                                                                      |
| **Switch vs. Router**                    | **Switch:** Layer-2, uses MAC addresses, plug-and-play, restricted to spanning tree. **Router:** Layer-3, uses IP addresses, requires configuration, enables optimal routing.                     |
| **Virtual LAN (VLAN)**                   | Creates **logical broadcast domains** over a single physical switch infrastructure. Provides traffic isolation, security, and ease of management.                                                 |
| **VLAN Trunking**                        | Connects VLANs across multiple switches. Uses **802.1Q** protocol, which adds a **VLAN tag** to the Ethernet frame to identify its VLAN.                                                          |
| **Multiprotocol Label Switching (MPLS)** | A packet-switched, virtual-circuit network. Used to interconnect IP routers, viewed as a **link-layer technology**. Enables **traffic engineering**.                                              |
| **Data Center Networking**               | Interconnects hundreds of thousands of hosts. Uses a **hierarchical topology** of switches (TOR, Tier-2, Tier-1). Employs **load balancers** and **multi-path routing** (e.g., ECMP).             |
| **Link Virtualization**                  | The concept of treating an entire network (e.g., telephone network, MPLS) as a single **virtual link-layer channel**.                                                                             |